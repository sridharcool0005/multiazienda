<section class="container new-form">
  <!-- <div class="modal-div" ng-show="client.formTypeShown"> -->
  <div class="modal-div" ng-show="client.formTypeShown">
    <div class="row">
      <div class="col-sm-8">
        <h2>Aggiungi una tipologia di attivita</h2>
      </div>
      <div class="col-sm-4">
        <a ng-click="client.showTypeForm()">X</a>
      </div>
    </div>
    <form ng-submit="client.typeNew()">
      <label for="name">Nome</label>
      <input type="text" name="name" ng-model="client.type.name">
      <input type="submit" value="AGGIUNGI">
    </form>
  </div>
  <div class="modal-div" ng-show="client.formZoneShown">
    <div class="row">
      <div class="col-sm-8">
        <h2>Aggiungi una zona</h2>
      </div>
      <div class="col-sm-4">
        <a ng-click="client.showZoneForm()">X</a>
      </div>
    </div>
    <form ng-submit="client.zoneNew()">
      <label for="name">Nome della zona</label>
      <input type="text" name="name" ng-model="client.zone.name">
      <input type="submit" value="AGGIUNGI">
    </form>
  </div>

  <div class="title-row">
    <h1>Aggiungi un nuovo cliente</h1>
  </div>

  <form name="client.clientForm" ng-submit="client.clientNew()" novalidate>
    <div>
      <p style="margin-top: 0;"><span>1.</span> Dettagli personali</p>
    </div>
    <div class="page row">
      <div class="col-md-3 col-sm-6">
        <label for="nome">Nome</label>
        <input type="text" name="nome" ng-model="client.client.nome" required>
        <!-- <pre>client.clientForm.$error = {{ client.clientForm.$error | json }}</pre> -->
        <div class="ng-message-error" ng-messages="client.clientForm.nome.$error" ng-show="client.clientForm.$submitted || client.clientForm.nome.$invalid && client.clientForm.nome.$touched" role="alert">
          <p ng-message="required">* Il nome dev'essere inserito</p>
        </div>
      </div>
      <div class="col-md-3 col-sm-6">
        <label for="cognome">Cognome</label>
        <input type="text" name="cognome" ng-model="client.client.cognome" required>

        <div class="ng-message-error" ng-messages="client.clientForm.cognome.$error" ng-show="client.clientForm.$submitted || client.clientForm.cognome.$invalid && client.clientForm.cognome.$touched" role="alert">
          <p ng-message="required">* Il cognome dev'essere inserito</p>
        </div>
      </div>
      <div class="col-md-3 col-sm-6">
        <label for="telefono">Numero di telefono</label>
        <input type="text" name="telefono" id="telefono" ng-model="client.client.telefono">
      </div>
      <div class="col-md-3 col-sm-6">
        <label for="email">Email</label>
        <input type="email" name="email" id="email" ng-model="client.client.email">
      </div>
    </div>
    <div class="page">
      <div ng-hide="client.location" class="row">
        <div class="col-md-9">
          <div ng-hide="client.results">
            <label for="searchAddress">Indirizzo</label>
            <input type="text" name="searchAddress" id="searchAddress" placeholder="cerca indirizzo" ng-model="client.random" required>
            <div class="ng-message-error" ng-messages="client.clientForm.searchAddress.$error" ng-show="client.clientForm.$submitted || client.clientForm.searchAddress.$invalid && client.clientForm.searchAddress.$touched" role="alert">
              <p ng-message="required">* L'indirizzo dev'essere inserito</p>
            </div>
          </div>

          <div ng-show="client.results" class="modal-div choose-address">
            <div>
              <div class="row">
                <div class="col-sm-6">
                  <h2 ng-show="client.results.length > 0">Scegli l'indirizzo</h2>
                  <h2 ng-hide="client.results.length > 0">Come prima cosa inserisci l'indirizzo</h2>
                </div>
                <div class="col-sm-6">
                  <p ng-click="client.cancel()">x</p>
                </div>
              </div>
              <ul ng-repeat="result in client.results track by $index">
                <li ng-click="client.chooseAddress($index)">{{ result.formatted_address }}</li>
              </ul>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div ng-hide="client.results">
            <a class="nav-btn form-btn no-label-above" id="searchBtn" ng-click="client.searchAddress()">Cerca</a>
          </div>
        </div>
      </div>
      <div ng-show="client.location" class="row">
        <div class="col-md-9">
          <label>Indirizzo scelto</label>
          <input class="chosen-address" type="text" value="{{ client.location.addressFormatted }}" disabled>
        </div>
        <div class="col-md-3">
          <a class="nav-btn form-btn no-label-above" ng-click="client.cancel()">Cerca un altro</a>
        </div>
      </div>
    </div>
    <hr>
    <div>
      <p><span>2.</span> Zona e Tipologia</p>
    </div>
    <div class="page row">
      <div class="col-md-6">
        <div class="row">
          <div class="col-sm-6">
            <label for="tipologiaAttivita">Tipologia</label>
            <select name="tipologiaAttivita" id="tipologiaAttivita"
            ng-options="option.name for option in client.types track by option.id"
            ng-model="client.client.tipologiaAttivita" required></select>

            <div class="ng-message-error" ng-messages="client.clientForm.tipologiaAttivita.$error" ng-show="client.clientForm.$submitted || client.clientForm.tipologiaAttivita.$invalid && client.clientForm.tipologiaAttivita.$touched" role="alert">
              <p ng-message="required">* La tipologia dev'essere inserita</p>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="form-options no-label-above">
              <a ng-hide="!client.client.tipologiaAttivita || client.client.tipologiaAttivita.length === 0" ng-click="client.clear('tipologiaAttivita')">Svuota casella</a>
              <a ng-click="client.showTypeForm()" ng-show="!client.client.tipologiaAttivita || client.client.tipologiaAttivita.length === 0">Aggiungi nuova tipologia</a>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="row">
          <div class="col-sm-6">
            <label for="zona">Zona</label>
            <select name="zona" id="zona"
            ng-options="option.name for option in client.zones track by option.id"
            ng-model="client.client.zona" required></select>

            <div class="ng-message-error" ng-messages="client.clientForm.zona.$error" ng-show="client.clientForm.$submitted || client.clientForm.zona.$invalid && client.clientForm.zona.$touched" role="alert">
              <p ng-message="required">* La zona dev'essere inserita</p>
            </div>
          </div>
          <div class="col-sm-6">
            <div class="form-options no-label-above">
              <a ng-hide="!client.client.zona || client.client.zona.length === 0" ng-click="client.clear('zona')">Svuota casella</a>
              <a ng-click="client.showZoneForm()" ng-show="!client.client.zona || client.client.zona.length === 0">Aggiungi nuova zona</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <hr>
    <div class="row">
      <div class="col-md-6">
        <div>
          <p><span>3.</span> Importo Investimento</p>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <label for="anticipo">Anticipo</label>
            <input type="number" name="anticipo" ng-model="client.client.importoInvestimento.anticipo" required>

            <div class="ng-message-error" ng-messages="client.clientForm.anticipo.$error" ng-show="client.clientForm.$submitted || client.clientForm.anticipo.$invalid && client.clientForm.anticipo.$touched" role="alert">
              <p ng-message="required">* L'anticipo dev'essere inserito</p>
            </div>
          </div>
          <div class="col-sm-6">
            <label for="totale">Totale</label>
            <input type="number" name="totale" ng-model="client.client.importoInvestimento.totale">
          </div>
        </div>
        <hr>
      </div>
      <div class="col-md-6">
        <div>
          <p><span>4.</span> Altre informazioni</p>
        </div>
        <div class="row">
          <div class="col-sm-6">
            <label for="sab">Sab</label>
            <input type="text" name="sab" id="sab" ng-model="client.client.sab">
          </div>
          <div class="col-sm-6">
            <label for="esperienza">Esperienza</label>
            <input type="text" name="esperienza" ng-model="client.client.esperienza">
          </div>
        </div>
        <hr>
      </div>
    </div>
    <input type="submit" value="AGGIUNGI CLIENTE">
  </form>
</section>
