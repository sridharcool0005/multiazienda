<section class="container new-form">
  <div class="modal-div" ng-show="bar.formTypeShown">
    <div class="row">
      <div class="col-sm-8">
        <h2>Aggiungi una tipologia di bar</h2>
      </div>
      <div class="col-sm-4">
        <a ng-click="bar.showTypeForm()">X</a>
      </div>
    </div>
    <form ng-submit="bar.typeNew()">
      <label for="name">Nome</label>
      <input type="text" name="name" ng-model="bar.type.name">
      <input type="submit" value="AGGIUNGI">
    </form>
  </div>
  <div class="modal-div" ng-show="bar.formZoneShown">
    <div class="row">
      <div class="col-sm-8">
        <h2>Aggiungi una zona</h2>
      </div>
      <div class="col-sm-4">
        <a ng-click="bar.showZoneForm()">X</a>
      </div>
    </div>
    <form ng-submit="bar.zoneNew()">
      <label for="name">Nome</label>
      <input type="text" name="name" ng-model="bar.zone.name">
      <input type="submit" value="AGGIUNGI">
    </form>
  </div>

  <div class="title-row">
    <h1>Aggiungi un nuovo bar</h1>
  </div>

  <div class="ng-message-error" ng-show="bar.barForm.$submitted && bar.barForm.$invalid">
    <p>Completa i seguenti campi per poter creare questo bar:
      <span ng-repeat="error in bar.barForm.$error.required track by $index">
        {{ error.$name | capitalise }}
        <span ng-show="$index !== (bar.barForm.$error.required.length - 1)">, </span>
      </span>
    </p>
  </div>

  <div class="search-bar">
    <div class="">
      <h2><span ng-hide="bar.location">Come prima cosa, trova il bar:</span><span ng-show="bar.location">Bar selezionato:</span></h2>
      <google-place></google-place>
    </div>
  </div>

  <!-- <div ng-show="bar.location"> -->
  <div>
    <form name="bar.barForm" ng-submit="bar.barNew()" novalidate>
      <div>
        <p><span>1.</span> Dettagli generali</p>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <label for="codiceAttivita">Codice Attivita</label>
          <input type="text" name="codiceAttivita" id="codiceAttivita" ng-model="bar.bar.codiceAttivita" value="bar.bar.codiceAttivita" required>

          <div class="ng-message-error" ng-messages="bar.barForm.codiceAttivita.$error" ng-show="bar.barForm.$submitted && bar.barForm.codiceAttivita.$invalid || bar.barForm.codiceAttivita.$invalid && bar.barForm.codiceAttivita.$touched" role="alert">
            <p ng-message="required">* Il codice dev'essere inserito</p>
          </div>
        </div>
        <div class="col-sm-6">
          <label for="denominazioneAttivita">Nome dell'attivita</label>
          <input type="text" name="denominazioneAttivita" id="denominazioneAttivita" ng-model="bar.bar.denominazioneAttivita" value="bar.bar.denominazioneAttivita" disabled>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div class="row">
            <div class="col-sm-6">
              <label>Scegli una foto</label>
            </div>
            <div class="col-sm-6">
              <a ng-click="bar.changePhoto()" class="change-photo-btn">PROSSIMA <back-arrow class="flip-this"></back-arrow></a>
            </div>
          </div>
          <div class="bar-choose-photo-div" style="background-image: url('{{ bar.bar.fotoAttivita }}');"></div>
        </div>
        <div class="col-sm-6">
          <label for="addressFormatted">Indirizzo</label>
          <textarea name="addressFormatted" id="addressFormatted" ng-model="bar.location.addressFormatted" disabled>{{ bar.location.addressFormatted }}</textarea>
        </div>
      </div>
      <hr>
      <div>
        <p><span>2.</span> Zona e tipologia</p>
      </div>
      <div class="page row">
        <div class="col-md-6">
          <div class="row">
            <div class="col-sm-6">
              <label for="tipologiaAttivita">Tipologia</label>
              <select name="tipologiaAttivita" ng-model="bar.bar.tipologiaAttivita" ng-change="bar.pushId('tipologiaAttivita')" ng-options="option.id as option.name for option in bar.types" required></select>

              <div class="ng-message-error" ng-messages="bar.barForm.tipologiaAttivita.$error" ng-show="bar.barForm.$submitted && bar.barForm.tipologiaAttivita.$invalid || bar.barForm.tipologiaAttivita.$invalid && bar.barForm.tipologiaAttivita.$touched" role="alert">
                <p ng-message="required">* La tipologia dev'essere inserita</p>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-options no-label-above">
                <a ng-hide="!bar.bar.tipologiaAttivita || bar.bar.tipologiaAttivita.length === 0" ng-click="bar.clear('tipologiaAttivita')">Svuota casella</a>
                <a ng-click="bar.showTypeForm()" ng-show="!bar.bar.tipologiaAttivita || bar.bar.tipologiaAttivita.length === 0">Aggiungi nuova tipologia</a>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="row">
            <div class="col-sm-6">
              <label for="zona">Zona</label>
              <select name="zona" ng-model="bar.bar.zona" ng-change="bar.pushId('zona')" ng-options="option.id as option.name for option in bar.zones" required></select>

              <div class="ng-message-error" ng-messages="bar.barForm.zona.$error" ng-show="bar.barForm.$submitted && bar.barForm.zona.$invalid || bar.barForm.zona.$invalid && bar.barForm.zona.$touched" role="alert">
                <p ng-message="required">* La zona dev'essere inserita</p>
              </div>
            </div>
            <div class="col-sm-6">
              <div class="form-options no-label-above">
                <a ng-hide="!bar.bar.zona || bar.bar.zona.length === 0" ng-click="bar.clear('zona')">Svuota casella</a>
                <a ng-click="bar.showZoneForm()" ng-show="!bar.bar.zona || bar.bar.zona.length === 0">Aggiungi zona</a>
              </div>
            </div>
          </div>
        </div>
      </div>
      <hr>
      <div>
        <p><span>3.</span> Dettagli attivita</p>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <label for="titolareAttivita">Titolare Attivita</label>
          <input type="text" name="titolareAttivita" id="titolareAttivita" ng-model="bar.bar.titolareAttivita">
        </div>
        <div class="col-sm-4">
          <label for="referente">Referente</label>
          <input type="text" name="referente" id="referente" ng-model="bar.bar.referente">
        </div>
        <div class="col-sm-4">
          <label for="metriQuadrati">Metri Quadrati</label>
          <input type="number" name="metriQuadrati" id="metriQuadrati" ng-model="bar.bar.metriQuadrati">
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-md-6">
          <div>
            <p><span>4.</span> Magazzino</p>
          </div>
          <div class="row" style="text-align: left;">
            <div class="col-sm-5">
              <label for="presente">Presente</label>
              <div class="no-label-radio">
                <input type="radio" ng-model="bar.bar.magazzino.presente" value="si"><label class="checkbox-label">Si</label>
                <input type="radio" ng-model="bar.bar.magazzino.presente" value="no"><label class="checkbox-label">No</label>
              </div>
            </div>
            <div class="col-sm-7">
              <div class="no-label-above no-label-radio" style="margin-bottom: 17px;">
                <input type="radio" ng-model="bar.bar.magazzino.internoEsterno" value="interno"><label class="checkbox-label">Interno</label>
                <input type="radio" ng-model="bar.bar.magazzino.internoEsterno" value="esterno"><label class="checkbox-label">Esterno</label>
              </div>
            </div>
          </div>
          <hr>
        </div>
        <div class="col-md-6">
          <div>
            <p><span>5.</span> Richiesta totale</p>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <label for="contanti">Contanti</label>
              <input type="text" name="contanti" id="contanti" ng-model="bar.bar.richiestaTotale.contanti" required>

              <div class="ng-message-error" ng-messages="bar.barForm.contanti.$error" ng-show="bar.barForm.$submitted && bar.barForm.contanti.$invalid || bar.barForm.contanti.$invalid && bar.barForm.contanti.$touched" role="alert">
                <p ng-message="required">* La richiesta totale dev'essere inserita</p>
              </div>
            </div>
            <div class="col-sm-6">
              <label for="dilazioni">Dilazioni</label>
              <input type="text" name="dilazioni" id="dilazioni" ng-model="bar.bar.richiestaTotale.dilazioni">
            </div>
          </div>
          <hr>
        </div>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div>
            <p><span>6.</span> Incasso giornaliero</p>
          </div>
          <div class="row">
            <div class="col-md-6">
              <label for="minimo">Minimo</label>
              <input type="text" name="minimo" ng-model="bar.bar.incassoGiornaliero.minimo">
            </div>
            <div class="col-md-6">
              <label for="massimo">Massimo</label>
              <input type="text" name="massimo" ng-model="bar.bar.incassoGiornaliero.massimo">
            </div>
          </div>
          <hr>
        </div>
        <div class="col-sm-6">
          <div>
            <p><span>7.</span> Incasso annuale</p>
          </div>
          <div class="row">
            <div class="col-md-6">
              <label for="minimo">Minimo</label>
              <input type="text" name="minimo" ng-model="bar.bar.incassoAnnuale.minimo">
            </div>
            <div class="col-md-6">
              <label for="massimo">Massimo</label>
              <input type="text" name="massimo" ng-model="bar.bar.incassoAnnuale.massimo">
            </div>
          </div>
          <hr>
        </div>
      </div>
      <div>
        <p><span>8.</span> Canone Locazione</p>
      </div>
      <div class="row" style="text-align: left;">
        <div class="col-md-3 col-sm-6">
          <label for="iva">Iva</label>
          <div class="no-label-radio">
            <input type="radio" name="iva" ng-model="bar.bar.canoneLocazione.iva" value="si">Si
            <input type="radio" name="iva" ng-model="bar.bar.canoneLocazione.iva" value="no">No
          </div>
        </div>
        <div class="col-md-3 col-sm-6">
          <label for="scadenza">Scadenza</label>
          <input type="number" name="scadenza" ng-model="bar.bar.canoneLocazione.scadenza">
        </div>
        <div class="col-md-3 col-sm-6">
          <label for="depCauzionale">Deposito Cauzionale</label>
          <input type="number" name="depCauzionale" ng-model="bar.bar.canoneLocazione.depCauzionale">
        </div>
        <div class="col-md-3 col-sm-6">
          <label for="speseCondominio">Spese Condominio</label>
          <input type="number" name="speseCondominio" ng-model="bar.bar.canoneLocazione.speseCondominio">
        </div>
      </div>
      <hr>
      <div class="row">
        <div class="col-md-6">
          <div>
            <p><span>9.</span> Tassa Suolo Pubblico</p>
            <div>
              <label style="color: transparent;">x</label>
              <input type="text" name="tassaSuoloPubb" ng-model="bar.bar.tassaSuoloPubb">
            </div>
          </div>
          <hr>
        </div>
        <div class="col-md-6">
          <div>
            <p><span>10.</span> Torrefazione</p>
          </div>
          <div class="row">
            <div class="col-sm-6">
              <label for="torrefazione">Torrefazione</label>
              <input type="text" name="torrefazione" ng-model="bar.bar.torrefazione.torrefazione">
            </div>
            <div class="col-sm-6">
              <label for="consumoMensile">Consumo Mensile</label>
              <input type="number" name="consumoMensile" ng-model="bar.bar.torrefazione.consumoMensile">
            </div>
          </div>
          <hr>
        </div>
      </div>
      <div>
        <p><span>11.</span> Ristrutturato</p>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <div class="row">
            <div class="col-sm-6">
              <label for="ristrutturato">Ristrutturato</label>
              <input type="number" name="ristrutturato" ng-model="bar.bar.ristrutturato.ristrutturato">
            </div>
            <div class="col-sm-6">
              <div class="no-label-above no-label-radio">
              <input type="radio" name="vero" ng-model="bar.bar.ristrutturato.vero" value="si">Si
              <input type="radio" name="vero" ng-model="bar.bar.ristrutturato.vero" value="no">No
            </div>
            </div>
          </div>
        </div>
        <div class="col-sm-6">
          <label for="impiantiCertificati">Impianti Certificati</label>
          <div class="no-label-radio">
            <input type="radio" name="vero" ng-model="bar.bar.ristrutturato.impiantiCertificati" value="si">Si
            <input type="radio" name="vero" ng-model="bar.bar.ristrutturato.impiantiCertificati" value="no">No
          </div>
          <!-- <input type="number" name="impiantiCertificati" ng-model="bar.bar.ristrutturato.impiantiCertificati"> -->
        </div>
      </div>
      <hr>
      <div>
        <p><span>12.</span> Aggi</p>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <label for="aggiTotali">Aggi Totali</label>
          <input type="number" name="aggiTotali" ng-model="bar.bar.aggi.aggiTotali">
        </div>
        <div class="col-sm-4">
          <label for="tabacco">Tobacco</label>
          <input type="number" name="tabacco" ng-model="bar.bar.aggi.tabacco">
        </div>
        <div class="col-sm-4">
          <label for="lotto">Lotto</label>
          <input type="number" name="lotto" ng-model="bar.bar.aggi.lotto">
        </div>
        <div class="col-sm-4">
          <label for="sisal">Sisal</label>
          <input type="number" name="sisal" ng-model="bar.bar.aggi.sisal">
        </div>
        <div class="col-sm-4">
          <label for="giochi">Giochi</label>
          <input type="number" name="giochi" ng-model="bar.bar.aggi.giochi">
        </div>
        <div class="col-sm-4">
          <label for="varie">Varie</label>
          <input type="number" name="varie" ng-model="bar.bar.aggi.varie">
        </div>
      </div>
      <hr>
      <div>
        <p><span>13.</span> Slot</p>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <label for="slot">Numero Slot</label>
          <input type="number" name="slot" ng-model="bar.bar.slot.slot">
        </div>
        <div class="col-sm-4">
          <label for="ditta">Ditta</label>
          <input type="text" name="ditta" ng-model="bar.bar.slot.ditta">
        </div>
        <div class="col-sm-4">
          <label for="percentuale">Percentuale</label>
          <input type="text" name="percentuale" ng-model="bar.bar.slot.percentuale">
        </div>
      </div>
      <hr>
      <div>
        <p><span>14.</span> Commercialista</p>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <label for="nome">Nome</label>
          <input type="text" name="nome" ng-model="bar.bar.commercialista.nome">
        </div>
        <div class="col-sm-4">
          <label for="telefono">Numbero di Telefono</label>
          <input type="text" name="telefono" ng-model="bar.bar.commercialista.telefono">
        </div>
        <div class="col-sm-4">
          <label for="email">Email</label>
          <input type="email" name="email" ng-model="bar.bar.commercialista.email">
        </div>
      </div>
      <hr>
      <div>
        <p><span>15.</span> Affitto Azienda</p>
      </div>
      <div class="row">
        <div class="col-md-4 col-sm-4">
          <label for="affittoAzienda">Affitto Azienda</label>
          <div class="no-label-radio">
            <input type="radio" name="affittoAzienda" ng-model="bar.bar.affittoAzienda.affittoAzienda" value="si">Si
            <input type="radio" name="affittoAzienda" ng-model="bar.bar.affittoAzienda.affittoAzienda" value="no">No
          </div>
        </div>
        <div class="col-md-4 col-sm-4">
          <label for="importo">Importo Affitto Azienda</label>
          <input type="text" name="importo" ng-model="bar.bar.affittoAzienda.importo">
        </div>
        <div class="col-md-4 col-sm-4">
          <label for="garanzie">Garanzie</label>
          <input type="text" name="garanzie" ng-model="bar.bar.affittoAzienda.garanzie">
        </div>
      </div>
      <hr>
      <div>
        <p><span>16.</span> Orari</p>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <label for="orarioApertura">Orario Apertura</label>
          <input type="text" name="orarioApertura" ng-model="bar.bar.orarioApertura">
        </div>
        <div class="col-sm-6">
          <label for="giornoRiposo">Giorno Riposo</label>
          <input type="text" name="giornoRiposo" ng-model="bar.bar.giornoRiposo">
        </div>
      </div>
      <hr>
      <div>
        <p><span>17.</span> Posti</p>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <label for="postiInterni">Posti Interni</label>
          <input type="text" name="postiInterni" ng-model="bar.bar.postiInterni">
        </div>
        <div class="col-sm-4">
          <label for="postiEsterni">Posti Esterni</label>
          <input type="text" name="postiEsterni" ng-model="bar.bar.postiEsterni.postiEsterni">
        </div>
        <div class="col-sm-4">
          <label for="areaPrivata">Area Privata</label>
          <div class="no-label-radio">
            <input type="radio" name="areaPrivata" ng-model="bar.bar.postiEsterni.areaPrivata" value="si">Si
            <input type="radio" name="areaPrivata" ng-model="bar.bar.postiEsterni.areaPrivata" value="no">No
          </div>
        </div>
      </div>
      <hr>
      <div>
        <p><span>18.</span> Addetti</p>
      </div>
      <div class="row">
        <div class="col-sm-6">
          <label for="numeroTitolari">Numero Titolari</label>
          <input type="number" name="numeroTitolari" ngmodel="bar.bar.addetti.numeroTitolari">
        </div>
        <div class="col-sm-6">
          <label for="dipendenti">Dipendenti</label>
          <input type="number" name="dipendenti" ngmodel="bar.bar.addetti.dipendenti">
        </div>
      </div>
      <hr>
      <div>
        <p><span>19.</span> Altre informazioni</p>
      </div>
      <div class="row">
        <div class="col-sm-4">
          <label for="cannaFumaria">Canna Fumaria</label>
          <div class="no-label-radio">
            <input type="radio" name="cannaFumaria" ng-model="bar.bar.cannaFumaria" value="si">Si
            <input type="radio" name="cannaFumaria" ng-model="bar.bar.cannaFumaria" value="no">No
          </div>
        </div>
        <div class="col-sm-4">
          <label for="riservatoDominio">Riservato Dominio</label>
          <input type="number" name="riservatoDominio" ng-model="bar.bar.riservatoDominio">
        </div>
        <div class="col-sm-4">
          <label for="attrezzatureComodato">Attrezzature Comodato</label>
          <input type="text" name="attrezzatureComodato" ng-model="bar.bar.attrezzatureComodato">
        </div>
      </div>
      <p style="margin-top: 20px; text-align: center;">Potrai aggiungere commenti dopo aver creato l'attivita</p>
      <input type="submit" value="AGGIUNGI">
    </form>
  </div>
</section>
